{"ast":null,"code":"import React,{useEffect,useState}from'react';import Styles from'./styles.module.css';import iconLocation from\"./img/IconLocation.svg\";import{Link}from\"react-router-dom\";import ScoreStar from'../Product/ScoreStar';import ScoreDescription from'../Product/ScoreDescription';import{Modal}from'react-responsive-modal';import ConfirmProductModal from'../Administrator/Product/ConfirmProductModal';import ModalProductAviso from\"../Administrator/Product/ModalProductSucceed\";import tildeOk from\"../Administrator/icons/tildeOk.svg\";import{AxiosDeleteReservation}from'../../axiosCollection/MyBookings/AxiosMyBookings';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Book(_ref){let{id,startDate,endDate,reservationId}=_ref;const role=sessionStorage.getItem(\"role\");const[data,setData]=useState({});const[admin,setAdmin]=useState(true);const[loading,setLoading]=useState(true);const[modalConfirmDeletedIsOpen,setModalConfirmDeletedIsOpen]=useState(false);const[modalProductSucceedIsOpen,setModalProductSucceedIsOpen]=useState(false);useEffect(()=>{axios.get(\"http://worldguestbooking.com.ar:8080/products/get/\".concat(id)).then(response=>{setData(()=>response.data);console.log(response.data,\"data Book\");return response.data;}).then(()=>setLoading(false));},[]);useEffect(()=>{if(sessionStorage.getItem(\"role\")===\"ADMIN\"){setAdmin(true);}else{setAdmin(false);}},[role]);const deleteReservation=id=>{closeModalConfirmDeleted();AxiosDeleteReservation(reservationId,id,openModalSucceed);};let loggued=sessionStorage.getItem(\"log\");const openModalSucceed=()=>{setModalProductSucceedIsOpen(true);};const closeModalSucceed=()=>{setModalProductSucceedIsOpen(false);window.location.href=\"/\";};function openModalConfirmDeleted(){setModalConfirmDeletedIsOpen(true);}function closeModalConfirmDeleted(){setModalConfirmDeletedIsOpen(false);}return/*#__PURE__*/_jsx(_Fragment,{children:!loading&&/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardBox,children:[/*#__PURE__*/_jsx(\"div\",{className:Styles.cardImage,children:/*#__PURE__*/_jsx(\"img\",{className:Styles.image,src:data.images.length>0?data.images[0].url:\"\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardHeaderBox,children:[/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardHeadline,children:[/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardCategory,children:[/*#__PURE__*/_jsx(\"p\",{children:data.category.title}),/*#__PURE__*/_jsx(ScoreStar,{qualification:data.qualification*2,starColor:\"#F0572D\"})]}),/*#__PURE__*/_jsx(\"div\",{className:Styles.cardName,children:data.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardScore,children:[/*#__PURE__*/_jsx(\"div\",{className:Styles.cardScoreNumber,children:/*#__PURE__*/_jsx(\"p\",{children:Math.floor(data.qualification*2)})}),/*#__PURE__*/_jsx(\"div\",{className:Styles.cardScoreWords,children:/*#__PURE__*/_jsx(ScoreDescription,{qualification:data.qualification*2})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardLocation,children:[/*#__PURE__*/_jsx(\"img\",{className:Styles.iconLocation,src:iconLocation,alt:\"\"}),data.city.name,\",\\xA0\",data.city.country,\",\\xA0\",data.reference]}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.cardDescription,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Inicio de Reserva:\",startDate,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Fin de Reserva:\",endDate]})]}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.buttonsBox,children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(id),className:Styles.link,children:/*#__PURE__*/_jsx(\"button\",{className:Styles.cardButton2,children:\"Ver Locacion\"})},id),/*#__PURE__*/_jsx(\"button\",{className:Styles.cardButton2,onClick:openModalConfirmDeleted,children:\"Eliminar\"})]}),/*#__PURE__*/_jsx(Modal,{open:modalConfirmDeletedIsOpen,onClose:closeModalConfirmDeleted,center:true,children:/*#__PURE__*/_jsx(ConfirmProductModal,{accion:\"eliminar la reserva\",setModalConfirmIsOpen:setModalConfirmDeletedIsOpen,funcionProducto:deleteReservation,closeModalConfirm:closeModalConfirmDeleted})}),/*#__PURE__*/_jsx(Modal,{open:modalProductSucceedIsOpen,onClose:closeModalSucceed,center:true,children:/*#__PURE__*/_jsx(ModalProductAviso,{title:\"Operaci\\xF3n confirmada.\",message:\"Se ha borrado la reserva exitosamente.\",closeModal:closeModalSucceed,icon:tildeOk})})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","Styles","iconLocation","Link","ScoreStar","ScoreDescription","Modal","ConfirmProductModal","ModalProductAviso","tildeOk","AxiosDeleteReservation","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Book","_ref","id","startDate","endDate","reservationId","role","sessionStorage","getItem","data","setData","admin","setAdmin","loading","setLoading","modalConfirmDeletedIsOpen","setModalConfirmDeletedIsOpen","modalProductSucceedIsOpen","setModalProductSucceedIsOpen","get","concat","then","response","console","log","deleteReservation","closeModalConfirmDeleted","openModalSucceed","loggued","closeModalSucceed","window","location","href","openModalConfirmDeleted","children","className","cardBox","cardImage","image","src","images","length","url","alt","cardInfo","cardHeaderBox","cardHeadline","cardCategory","category","title","qualification","starColor","cardName","name","cardScore","cardScoreNumber","Math","floor","cardScoreWords","cardLocation","city","country","reference","cardDescription","buttonsBox","to","link","cardButton2","onClick","open","onClose","center","accion","setModalConfirmIsOpen","funcionProducto","closeModalConfirm","message","closeModal","icon"],"sources":["/Users/nestor/Desktop/ProyectoIntegradorCTD/src/components/MyBookings/Book.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Styles from './styles.module.css';\nimport iconLocation from \"./img/IconLocation.svg\";\nimport { Link } from \"react-router-dom\";\nimport ScoreStar from '../Product/ScoreStar';\nimport ScoreDescription from '../Product/ScoreDescription';\nimport { Modal } from 'react-responsive-modal';\nimport ConfirmProductModal from '../Administrator/Product/ConfirmProductModal';\nimport ModalProductAviso from \"../Administrator/Product/ModalProductSucceed\";\nimport tildeOk from \"../Administrator/icons/tildeOk.svg\";\nimport { AxiosDeleteReservation } from '../../axiosCollection/MyBookings/AxiosMyBookings';\nimport axios from 'axios';\n\nexport default function Book({ id, startDate, endDate, reservationId }) {\n    const role = sessionStorage.getItem(\"role\");\n    const [data, setData] = useState({});\n    const [admin, setAdmin] = useState(true);\n    const [loading, setLoading] = useState(true);\n    const [modalConfirmDeletedIsOpen, setModalConfirmDeletedIsOpen] = useState(false)\n    const [modalProductSucceedIsOpen, setModalProductSucceedIsOpen] = useState(false)\n\n    useEffect(() => {\n        axios.get(`http://worldguestbooking.com.ar:8080/products/get/${id}`)\n            .then(response => {\n                setData(() => response.data);\n                console.log(response.data, \"data Book\");\n                return response.data;\n            })\n            .then(() => setLoading(false))\n    }, [])\n\n    useEffect(() => {\n        if (sessionStorage.getItem(\"role\") === \"ADMIN\") {\n            setAdmin(true)\n        } else {\n            setAdmin(false)\n        }\n    }, [role])\n\n    const deleteReservation = (id) => {\n        closeModalConfirmDeleted()\n        AxiosDeleteReservation(reservationId, id,openModalSucceed)        \n    }\n\n    let loggued = sessionStorage.getItem(\"log\");\n\n    const openModalSucceed = (() => {\n        setModalProductSucceedIsOpen(true)\n    })\n\n    const closeModalSucceed = (() => {\n        setModalProductSucceedIsOpen(false)\n        window.location.href = \"/\"\n    })\n\n    function openModalConfirmDeleted() {\n        setModalConfirmDeletedIsOpen(true)\n    }\n\n    function closeModalConfirmDeleted() {\n        setModalConfirmDeletedIsOpen(false)\n    }\n\n    return (\n        <>{!loading &&\n            <div className={Styles.cardBox} >\n                <div className={Styles.cardImage}>\n                    <img className={Styles.image} src={data.images.length > 0 ? data.images[0].url : \"\"} alt=\"\" />\n                </div>\n                <div className={Styles.cardInfo}>\n                    <div className={Styles.cardHeaderBox}>\n                        <div className={Styles.cardHeadline}>\n                            <div className={Styles.cardCategory}>\n                                <p>{data.category.title}</p>\n                                <ScoreStar qualification={data.qualification * 2} starColor=\"#F0572D\" />\n                            </div>\n                            <div className={Styles.cardName}>{data.name}</div>\n                        </div>\n                        <div className={Styles.cardScore}>\n                            <div className={Styles.cardScoreNumber}>\n                                <p>{Math.floor(data.qualification * 2)}</p>\n                            </div>\n                            <div className={Styles.cardScoreWords}>\n                                <ScoreDescription qualification={data.qualification * 2} />\n                            </div>\n                        </div>\n                    </div>\n                    <div className={Styles.cardLocation}>\n                        <img className={Styles.iconLocation} src={iconLocation} alt=\"\" />\n                        {data.city.name},&#160;{data.city.country},&#160;{data.reference}\n                    </div>\n\n                    <div className={Styles.cardDescription}>\n                        <p>Inicio de Reserva:{startDate} </p>\n                        <p>Fin de Reserva:{endDate}</p>\n                    </div>\n\n\n                    <div className={Styles.buttonsBox}>\n                        <Link to={`/product/${id}`} key={id} className={Styles.link}>\n                            <button className={Styles.cardButton2}>Ver Locacion</button>\n                        </Link>\n                        <button className={Styles.cardButton2} onClick={openModalConfirmDeleted}>Eliminar</button>\n                    </div>\n                    <Modal open={modalConfirmDeletedIsOpen} onClose={closeModalConfirmDeleted} center>\n                        <ConfirmProductModal accion=\"eliminar la reserva\" setModalConfirmIsOpen={setModalConfirmDeletedIsOpen} funcionProducto={deleteReservation} closeModalConfirm={closeModalConfirmDeleted} />\n                    </Modal>\n                    <Modal open={modalProductSucceedIsOpen} onClose={closeModalSucceed} center>\n                        <ModalProductAviso title=\"Operación confirmada.\" message=\"Se ha borrado la reserva exitosamente.\" closeModal={closeModalSucceed} icon={tildeOk} />\n                    </Modal>\n                </div>\n\n            </div>\n        }</>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}