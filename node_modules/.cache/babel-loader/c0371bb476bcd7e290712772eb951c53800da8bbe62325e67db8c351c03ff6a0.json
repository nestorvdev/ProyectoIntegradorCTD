{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Styles from\"./styles.module.css\";import StylesApp from\"../../App.module.css\";import Card from\"./Card.jsx\";import ClearFilters from\"./ClearFilters\";import arrow from\"./img/arrow.svg\";import{AxiosGetProductosRecomendados,AxiosGetProductosFavoritos,AxiosGetProductosPorCiudadFechaYCategoria}from\"../../axiosCollection/Cards/AxiosCards\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cards(_ref){let{setBorrarCity,setBorrarDate,setLastLocation,handleClean,category,city,search,clickBusqueda,favourite,clickSeeFavourites,setCategory,setCity,setStartDate,setEndDate,setFavourite,setSearch,propStartDate,propEndDate}=_ref;const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[errorMessage,setErrorMessage]=useState(\"\");const limitCardPerPage=8;const[numberPage,setNumberPage]=useState(1);const[titulo,setTitulo]=useState(\"Recomendaciones\");const[like,setLike]=useState(false);const startDate=new Date(propStartDate).setHours(0,0,0,0)>=new Date().setHours(0,0,0,0)?new Date(propStartDate):null;const endDate=new Date(propEndDate).setHours(0,0,0,0)>new Date().setHours(0,0,0,0)?new Date(propEndDate):null;const[listadoFavoritos,setListadoFavoritos]=useState([]);useEffect(()=>{AxiosGetProductosFavoritos(setListadoFavoritos,setErrorMessage);if(category===\"All\"&&search===false&&favourite===false){AxiosGetProductosRecomendados(setData,setLoading,setTitulo,setErrorMessage);}else if(favourite===false){AxiosGetProductosPorCiudadFechaYCategoria(setData,setLoading,setTitulo,setErrorMessage,city,startDate,endDate,category);}else if(favourite){AxiosGetProductosFavoritos(setData,setErrorMessage);setListadoFavoritos(data);setTitulo(\"Favoritos\");}else{setErrorMessage(\"Error\");setLoading(false);}setNumberPage(1);},[category,clickBusqueda,favourite,clickSeeFavourites]);const dataLimited=()=>data.slice((numberPage-1)*limitCardPerPage,numberPage*limitCardPerPage);const indexPages=()=>{let pages=[];let cant=data.length%limitCardPerPage===0?data.length/limitCardPerPage:Math.floor(data.length/limitCardPerPage)+1;for(let i=0;i<cant;i++){pages.push(/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNumberPage(i+1),disabled:numberPage-1===i,children:i+1},i+1));}return pages;};return errorMessage&&loading?/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(StylesApp.delimiter),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(Styles.cardsBlock,\" \").concat(StylesApp.delimiterChild),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Resultados\"}),\"Resultados no disponibles - Falta la conexi\\xF3n con el Back\"]})}):/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(StylesApp.delimiter),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(Styles.cardsBlock,\" \").concat(StylesApp.delimiterChild),children:[/*#__PURE__*/_jsxs(\"h2\",{children:[titulo,/*#__PURE__*/_jsx(ClearFilters,{handleClean:handleClean,setCategory:setCategory,setCity:setCity,setTitulo:setTitulo,setStartDate:setStartDate,setEndDate:setEndDate,setSearch:setSearch,setFavourite:setFavourite,setBorrarCity:setBorrarCity,setBorrarDate:setBorrarDate})]}),/*#__PURE__*/_jsx(\"div\",{className:Styles.cardsBox,children:dataLimited().map(e=>/*#__PURE__*/_jsx(Card,{setLastLocation:setLastLocation,image:e.images.length>0?e.images[0].url:\"\",cardCategory:e.category.title,name:e.name,city:e.city.name,country:e.city.country,description:e.description,id:e.id,reference:e.reference,qualification:e.qualification*2,features:e.features,latitude:e.latitude,longitude:e.longitude,address:e.address,favorite:listadoFavoritos.find(pf=>pf.id===e.id)?true:false},e.id))}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.pages,children:[numberPage>1&&/*#__PURE__*/_jsx(\"img\",{className:Styles.left,onClick:()=>setNumberPage(numberPage-1),src:arrow,alt:\"arrowLeft\"}),indexPages(),numberPage<indexPages().length&&/*#__PURE__*/_jsx(\"img\",{className:Styles.right,onClick:()=>setNumberPage(numberPage+1),src:arrow,alt:\"arrowRight\"})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","Styles","StylesApp","Card","ClearFilters","arrow","AxiosGetProductosRecomendados","AxiosGetProductosFavoritos","AxiosGetProductosPorCiudadFechaYCategoria","jsx","_jsx","jsxs","_jsxs","Cards","_ref","setBorrarCity","setBorrarDate","setLastLocation","handleClean","category","city","search","clickBusqueda","favourite","clickSeeFavourites","setCategory","setCity","setStartDate","setEndDate","setFavourite","setSearch","propStartDate","propEndDate","data","setData","loading","setLoading","errorMessage","setErrorMessage","limitCardPerPage","numberPage","setNumberPage","titulo","setTitulo","like","setLike","startDate","Date","setHours","endDate","listadoFavoritos","setListadoFavoritos","dataLimited","slice","indexPages","pages","cant","length","Math","floor","i","push","onClick","disabled","children","className","concat","delimiter","cardsBlock","delimiterChild","cardsBox","map","e","image","images","url","cardCategory","title","name","country","description","id","reference","qualification","features","latitude","longitude","address","favorite","find","pf","left","src","alt","right"],"sources":["/Users/nestor/Desktop/ProyectoIntegradorCTD/src/components/Cards/Cards.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Styles from \"./styles.module.css\";\nimport StylesApp from \"../../App.module.css\";\nimport Card from \"./Card.jsx\";\nimport ClearFilters from \"./ClearFilters\";\nimport arrow from \"./img/arrow.svg\";\nimport {\n  AxiosGetProductosRecomendados,\n  AxiosGetProductosFavoritos,\n  AxiosGetProductosPorCiudadFechaYCategoria,\n} from \"../../axiosCollection/Cards/AxiosCards\";\n\nexport default function Cards({\n  setBorrarCity, \n  setBorrarDate,\n  setLastLocation,\n  handleClean,\n  category,\n  city,\n  search,\n  clickBusqueda,\n  favourite,\n  clickSeeFavourites,\n  setCategory,\n  setCity,\n  setStartDate,\n  setEndDate,\n  setFavourite,\n  setSearch,\n  propStartDate,\n  propEndDate,\n}) {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const limitCardPerPage = 8;\n  const [numberPage, setNumberPage] = useState(1);\n  const [titulo, setTitulo] = useState(\"Recomendaciones\");\n  const [like, setLike] = useState(false);\n  const startDate =\n    new Date(propStartDate).setHours(0, 0, 0, 0) >=\n    new Date().setHours(0, 0, 0, 0)\n      ? new Date(propStartDate)\n      : null;\n  const endDate =\n    new Date(propEndDate).setHours(0, 0, 0, 0) > new Date().setHours(0, 0, 0, 0)\n      ? new Date(propEndDate)\n      : null;\n  const [listadoFavoritos, setListadoFavoritos] = useState([]);  \n\n  useEffect(() => {\n    AxiosGetProductosFavoritos(setListadoFavoritos, setErrorMessage);\n    if (category === \"All\" && search === false && favourite === false) {\n      AxiosGetProductosRecomendados(\n        setData,\n        setLoading,\n        setTitulo,\n        setErrorMessage\n      );     \n    } else if (favourite === false) {\n      AxiosGetProductosPorCiudadFechaYCategoria(\n        setData,\n        setLoading,\n        setTitulo,\n        setErrorMessage,\n        city,\n        startDate,\n        endDate,\n        category\n      );\n    } else if (favourite) {\n      AxiosGetProductosFavoritos(setData, setErrorMessage);\n      setListadoFavoritos(data);\n      setTitulo(`Favoritos`);\n    } else {\n      setErrorMessage(\"Error\");\n      setLoading(false);\n    }\n    setNumberPage(1);\n  }, [category, clickBusqueda, favourite, clickSeeFavourites]);\n\n  const dataLimited = () =>\n    data.slice(\n      (numberPage - 1) * limitCardPerPage,\n      numberPage * limitCardPerPage\n    );\n  const indexPages = () => {\n    let pages = [];\n    let cant =\n      data.length % limitCardPerPage === 0\n        ? data.length / limitCardPerPage\n        : Math.floor(data.length / limitCardPerPage) + 1;\n    for (let i = 0; i < cant; i++) {\n      pages.push(\n        <button\n          onClick={() => setNumberPage(i + 1)}\n          disabled={numberPage - 1 === i}\n          key={i + 1}\n        >\n          {i + 1}\n        </button>\n      );\n    }\n    return pages;\n  };\n\n  return errorMessage && loading ? (\n    <div className={`${StylesApp.delimiter}`}>\n      <div className={`${Styles.cardsBlock} ${StylesApp.delimiterChild}`}>\n        <h2>Resultados</h2>\n        Resultados no disponibles - Falta la conexi√≥n con el Back\n      </div>\n    </div>\n  ) : (\n    <div className={`${StylesApp.delimiter}`}>\n      <div className={`${Styles.cardsBlock} ${StylesApp.delimiterChild}`}>\n        <h2>\n          {titulo}\n          <ClearFilters\n            handleClean={handleClean}\n            setCategory={setCategory}\n            setCity={setCity}\n            setTitulo={setTitulo}\n            setStartDate={setStartDate}\n            setEndDate={setEndDate}\n            setSearch={setSearch}\n            setFavourite={setFavourite}\n            setBorrarCity={setBorrarCity} \n            setBorrarDate={setBorrarDate}\n          />\n        </h2>\n        <div className={Styles.cardsBox}>\n          {dataLimited().map((e) => (\n            <Card\n              setLastLocation={setLastLocation}\n              image={e.images.length > 0 ? e.images[0].url : \"\"}\n              cardCategory={e.category.title}\n              name={e.name}\n              city={e.city.name}\n              country={e.city.country}\n              description={e.description}\n              key={e.id}\n              id={e.id}\n              reference={e.reference}\n              qualification={e.qualification * 2}\n              features={e.features}\n              latitude={e.latitude}\n              longitude={e.longitude}\n              address={e.address}              \n              favorite={\n                listadoFavoritos.find((pf) => pf.id === e.id) ? true : false\n              }\n            />\n          ))}\n        </div>\n        <div className={Styles.pages}>\n          {numberPage > 1 && (\n            <img\n              className={Styles.left}\n              onClick={() => setNumberPage(numberPage - 1)}\n              src={arrow}\n              alt=\"arrowLeft\"\n            />\n          )}\n          {indexPages()}\n          {numberPage < indexPages().length && (\n            <img\n              className={Styles.right}\n              onClick={() => setNumberPage(numberPage + 1)}\n              src={arrow}\n              alt=\"arrowRight\"\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}